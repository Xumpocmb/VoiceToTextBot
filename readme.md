# Бот распознавания речи
### Этот бот принимает голосовые сообщения от пользователей в Telegram, конвертирует их в формат WAV с помощью API Convertio и распознаёт текст с использованием библиотеки распознавания речи Vosk.

---

## Основные функции

1. Команда "start":
Бот приветствует пользователей, когда они отправляют команду `/start`.

2. Обработка голосовых сообщений:
Бот принимает голосовые сообщения, скачивает файл, конвертирует его в формат `WAV` и распознаёт речь.

3. Конвертация аудио с помощью API Convertio:
Голосовые файлы отправляются в API Convertio для преобразования в формат WAV.

4. Распознавание речи с помощью Vosk:
Бот использует библиотеку Vosk для преобразования аудио в текст.

5. Логирование:
Записывает важные события, такие как статус конвертации файла, ответы API и распознанный текст.

6. Управление файлами:
Бот удаляет старые аудиофайлы при запуске, чтобы поддерживать чистоту рабочей директории.

---


## Ключевые функции
`convert_voice_to_text(file_path: str)`:
Конвертирует аудиофайл в формат WAV через API Convertio.
Обрабатывает ошибки и проверяет статус выполнения до завершения.


`send_welcome(message: Message)`:
Отправляет приветствие, когда пользователь запускает бота командой /start.

`handle_voice(message: Message)`:
Загружает голосовые сообщения, конвертирует их в WAV и распознаёт текст с помощью Vosk.

`main()`:
Инициализирует бота, удаляет старые файлы и запускает процесс получения сообщений.

---

## Требования
### Библиотеки Python:

- `vosk`: Для распознавания речи.
- `aiogram`: Для интеграции с Telegram Bot API.
- `aiohttp`: Для HTTP-запросов.
- `wave`: Для работы с аудиофайлами WAV.
- `logging`: Для логирования событий.


### API-ключи:

- Токен Telegram-бота: Замените `API_TOKEN` на токен вашего бота.
- API-ключ Convertio: Замените `CONVERTIO_API_KEY` на ваш ключ.
- Модель Vosk: Скачайте и поместите в рабочую директорию небольшую модель русского языка (vosk-model-small-ru).



### Версия Python:

- Совместима с Python 3.8 и выше.

---

## Инструкции по настройке

1. Установите зависимости:

   ```
   pip install aiogram aiohttp vosk
   ```

2. Поместите папку с моделью Vosk (vosk-model-small-ru) в рабочую директорию.

3. Замените в коде следующие значения:

   - `API_TOKEN` на токен вашего Telegram-бота.
   - `CONVERTIO_API_KEY` на ваш ключ API Convertio.

4. Запустите бота:

   ```
   python bot.py
   ```

---

### Заметки

- Убедитесь, что квоты API Convertio не превышены, чтобы избежать ошибок.
- При запуске бот автоматически удаляет старые файлы .ogg и .wav.
- В коде предусмотрена обработка ошибок для управления проблемами, связанными с API и файлами.
- Логирование и отладка
- Логи отображаются в консоли с временными метками и уровнями важности.
- Ключевые события, такие как конвертация файлов и результаты распознавания, записываются для упрощения отладки.
